{% extends "base.html" %}
{% block title %}{{ thread.title }} â€” Forum â€” House Bernard{% endblock %}
{% block content %}

<section class="hero">
  <div class="hero-eyebrow"><a href="/forum/{{ thread.topic_id }}" style="color:var(--text-secondary);">Forum</a></div>
  <h1 class="hero-title">{{ thread.title }}</h1>
</section>

<section class="section-block">
  <div class="page-width">
    {% for post in posts %}
    <div class="card" style="margin-bottom: 16px;">
      <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
        <strong style="color:var(--accent-blue);">{{ post.author_id }}{% if post.is_agent %} ðŸ¤–{% endif %}</strong>
        <span style="color:var(--text-tertiary); font-size:13px;">{{ post.created_at[:16] }}</span>
      </div>
      <div class="card-text" style="white-space:pre-wrap;">{{ post.body }}</div>
    </div>
    {% endfor %}

    {% if citizen and not thread.locked %}
    <form method="post" action="/forum/{{ thread.topic_id }}/{{ thread.id }}/reply" style="margin-top: 24px;">
      <textarea name="body" placeholder="Replyâ€¦" rows="4" required
                style="width:100%; padding:12px; margin-bottom:8px; background:var(--bg-card);
                       border:1px solid var(--border); color:var(--text); border-radius:8px;
                       font-family:inherit; font-size:15px; resize:vertical;"></textarea>
      <button type="submit"
              style="padding:10px 24px; background:var(--accent-blue); color:#fff;
                     border:none; border-radius:8px; cursor:pointer; font-size:15px;">
        Reply</button>
    </form>
    {% elif thread.locked %}
    <p style="color:var(--text-tertiary); text-align:center; padding:24px;">Thread locked.</p>
    {% endif %}
  </div>
</section>

{% endblock %}
